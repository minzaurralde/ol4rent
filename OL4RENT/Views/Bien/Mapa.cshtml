@model IEnumerable<OL4RENT.Models.Bien>

@{
    ViewBag.Title = "Mapa";
}

<script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAR_JcEyolVGeSAWZsQ4g8cIuOLBnDD2l4&sensor=false"></script>
<script type="text/javascript">
    var map;
    function initialize() {

        var mapOptions = {
            center: new google.maps.LatLng(-34.397+.4, 150.644+.4),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

        addMarkers();
    }
    google.maps.event.addDomListener(window, 'load', initialize);

    function addM(lat, lng, titulo, link) {
        var myLL = new google.maps.LatLng(lat, lng);
        var marker = new google.maps.Marker({
            position: myLL,
            title: titulo,
            map: map,
            url: link
        });
        google.maps.event.addListener(marker, 'click', function () {
            window.location.href = marker.url;
        });
    }

    function addMarkers() {
        var lat = -34.397;
        var lng = 150.644;
    @foreach (var item in Model)
    {
        <text>
        addM(lat, lng, '@item.Nombre', '/Bien/Details/@item.Id');
        lat = lat + .1;
        lng = lng + .1;
        </text>
    }

         }
</script>
<h2>Ubicación</h2>
<br />
<div id="map-canvas" style="width: 300px; height: 200px"></div>


